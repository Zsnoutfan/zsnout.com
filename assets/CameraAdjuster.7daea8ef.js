import{_ as u}from"./FullscreenCanvas.4e6577e5.js";import{d as h,q as f,s as g,o as p,c as v,w,r as _}from"./vendor.c311a53b.js";let n=document.createElement("canvas"),c=n.getContext("2d");function k(e){return new Promise(r=>{let t=document.createElement("video");t.onloadedmetadata=()=>r(t),t.srcObject=e,t.play()})}function x(e,r,t){return n.width=r||e.videoWidth,n.height=t||e.videoHeight,c.drawImage(e,0,0,n.width,n.height),c.getImageData(0,0,n.width,n.height)}const C=h({props:{transform:null,breakpoint:null},setup(e){const{transform:r}=e;let t=new Promise(a=>{f(()=>{a(navigator.mediaDevices.getUserMedia({video:!0}))})}).catch(()=>{}),i;async function d(a){let o=a.getContext("2d");if(!o)return;let s=await t;if(!s)return;let m=await k(s);i=setInterval(()=>{let l=x(m,a.width,a.height);o.putImageData(r(l),0,0)},1e3/30)}return g(()=>clearInterval(i)),(a,o)=>(p(),v(u,{breakpoint:e.breakpoint,onReady:d},{nav:w(()=>[_(a.$slots,"nav")]),_:3},8,["breakpoint"]))}});export{C as _};
