import{a as T}from"./modal.dcb1f307.js";import{_ as $}from"./FullscreenCanvas.3ae08aff.js";import{d as k,q as I,s as R,o as b,c as x,w as u,r as y,K as B,j as h,e as v}from"./vendor.c311a53b.js";import{N as p,r as _}from"./index.5007f319.js";let c=document.createElement("canvas"),w=c.getContext("2d");function N(i){return new Promise(l=>{let t=document.createElement("video");t.onloadedmetadata=()=>l(t),t.srcObject=i,t.play()})}function D(i,l,t){return c.width=l||i.videoWidth,c.height=t||i.videoHeight,w.drawImage(i,0,0,c.width,c.height),w.getImageData(0,0,c.width,c.height)}const M=k({props:{transform:null,breakpoint:null},setup(i){const{transform:l}=i;let t=new Promise(o=>{I(()=>{o(navigator.mediaDevices.getUserMedia({video:!0}))})}).catch(()=>{T("Oops, we weren't able to get camera permissions. Try again later.")}),n;async function a(o){let s=o.getContext("2d");if(!s)return;let d=await t;if(!d)return;let m=await N(d);n=setInterval(()=>{let f=D(m,o.width,o.height);s.putImageData(l(f),0,0)},1e3/30)}return R(()=>clearInterval(n)),(o,s)=>(b(),x($,{breakpoint:i.breakpoint,onReady:a},{nav:u(()=>[y(o.$slots,"nav")]),_:3},8,["breakpoint"]))}}),V=v("Toggle Red"),j=v("Toggle Green"),E=v("Toggle Blue"),q=k({setup(i){let l=""+(B().params.colors||""),t=l.includes("r"),n=l.includes("g"),a=l.includes("b"),o=t&&n&&a;function s(){return`/color-remover/${t?"r":""}${n?"g":""}${a?"b":""}`}function d(r){if(t)for(let e=0;e<r.data.length;e+=4)r.data[e]=0;if(n)for(let e=1;e<r.data.length;e+=4)r.data[e]=0;if(a)for(let e=2;e<r.data.length;e+=4)r.data[e]=0;if(o)for(let e=0;e<r.data.length;e+=4){let g=360*Math.random();r.data[e]=g,r.data[e+1]=g,r.data[e+2]=g}return r}function m(){t=!t,o=t&&n&&a,_.push(s())}function f(){n=!n,o=t&&n&&a,_.push(s())}function C(){a=!a,o=t&&n&&a,_.push(s())}return(r,e)=>(b(),x(M,{breakpoint:600,transform:d},{nav:u(()=>[h(p,{onClick:m},{default:u(()=>[V]),_:1}),h(p,{onClick:f},{default:u(()=>[j]),_:1}),h(p,{onClick:C},{default:u(()=>[E]),_:1})]),_:1}))}});export{q as default};
