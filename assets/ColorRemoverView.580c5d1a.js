import{a as T}from"./modal.21760b9a.js";import{_ as y}from"./FullscreenCanvas.35c1e37c.js";import{d as k,q as $,s as I,o as b,c as x,w as u,r as R,K as B,j as h,e as v}from"./vendor.c311a53b.js";import{N as p,r as _}from"./index.d74c110e.js";import"./FullscreenDisplay.2c5ea080.js";let c=document.createElement("canvas"),w=c.getContext("2d");function N(l){return new Promise(s=>{let e=document.createElement("video");e.onloadedmetadata=()=>s(e),e.srcObject=l,e.play()})}function D(l,s,e){return c.width=s||l.videoWidth,c.height=e||l.videoHeight,w.drawImage(l,0,0,c.width,c.height),w.getImageData(0,0,c.width,c.height)}const M=k({props:{transform:null,breakpoint:null},setup(l){const{transform:s}=l;let e=new Promise(r=>{$(()=>{r(navigator.mediaDevices.getUserMedia({video:!0}))})}).catch(()=>{T("Oops, we weren't able to get camera permissions. Try again later.")}),o;async function n(r){let i=r.getContext("2d");if(!i)return;let d=await e;if(!d)return;let m=await N(d);o=setInterval(()=>{let f=D(m,r.width,r.height);i.putImageData(s(f),0,0)},1e3/30)}return I(async()=>{clearInterval(o);let r=await e;!r||r.getTracks().map(i=>{i.readyState=="live"&&i.stop()})}),(r,i)=>(b(),x(y,{breakpoint:l.breakpoint,onReady:n},{nav:u(()=>[R(r.$slots,"nav")]),_:3},8,["breakpoint"]))}}),V=v("Toggle Red"),j=v("Toggle Green"),E=v("Toggle Blue"),q=k({setup(l){let s=""+(B().params.colors||""),e=s.includes("r"),o=s.includes("g"),n=s.includes("b"),r=e&&o&&n;function i(){return`/color-remover/${e?"r":""}${o?"g":""}${n?"b":""}`}function d(a){if(e)for(let t=0;t<a.data.length;t+=4)a.data[t]=0;if(o)for(let t=1;t<a.data.length;t+=4)a.data[t]=0;if(n)for(let t=2;t<a.data.length;t+=4)a.data[t]=0;if(r)for(let t=0;t<a.data.length;t+=4){let g=360*Math.random();a.data[t]=g,a.data[t+1]=g,a.data[t+2]=g}return a}function m(){e=!e,r=e&&o&&n,_.push(i())}function f(){o=!o,r=e&&o&&n,_.push(i())}function C(){n=!n,r=e&&o&&n,_.push(i())}return(a,t)=>(b(),x(M,{breakpoint:600,transform:d},{nav:u(()=>[h(p,{onClick:m},{default:u(()=>[V]),_:1}),h(p,{onClick:f},{default:u(()=>[j]),_:1}),h(p,{onClick:C},{default:u(()=>[E]),_:1})]),_:1}))}});export{q as default};
