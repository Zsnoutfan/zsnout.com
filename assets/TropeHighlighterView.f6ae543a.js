import{g as b,a as y,s as T}from"./modal.378f23e2.js";import{D as C,N,_ as w}from"./index.817c44c4.js";import{d as I,f as M,q as D,s as H,o as L,c as S,w as u,j as V,g as _,e as E,p as O,k as P}from"./vendor.c311a53b.js";const R=c=>(O("data-v-4b3fdba6"),c=c(),P(),c),j=E("Highlight Tropes"),B=R(()=>_("link",{href:"https://fonts.googleapis.com/css2?family=Frank+Ruhl+Libre:wght@500&display=swap",rel:"stylesheet"},null,-1));var G=I({setup(c){let n=M(null),p={Etnachta:"\u05D1\u0591",SofPassuk:"\u05E1\u05BD",Segol:"\u05D1\u0592",Shalshelet:"\u05D1\u0593",ZakefKatan:"\u05D1\u0594",ZakefGadol:"\u05D1\u0595",Tifcha:"\u05D1\u0596",Rivia:"\u05D1\u0597",Zarka:"\u05D1\u05AE",Pashta:"\u05D1\u0599",Yetiv:"\u05D1\u059A",Tevir:"\u05D1\u059B",Pazer:"\u05D1\u05A1",QarneFarah:"\u05D1\u059F",TelishaGedola:"\u05D1\u05A0",Geresh:"\u05D1\u059C",Gershayim:"\u05D1\u059E",Mercha:"\u05D1\u05A5",Munach:"\u05D1\u05A3",Mahpach:"\u05D1\u05A4",Darga:"\u05D1\u05A7",Kadma:"\u05D1\u05A8",TelishaKetana:"\u05D1\u05A9",MerchaKefula:"\u05D1\u05A6",YerachBenYomo:"\u05D1\u05AA"};for(let[e,t]of Object.entries(p))p[e]=t[1];let x=Object.entries(p);function v(e){let t=-1,s=null;for(const[l,o]of x)e.indexOf(o)>t&&(t=e.indexOf(o),s=l);return s}function k(e){e.preventDefault();let t=e.clipboardData;if(!t)return;let s=t.getData("text/plain");if(!s)return;let l=document.getSelection();if(!l)return;let o=l.getRangeAt(0);o.deleteContents();let r=document.createTextNode(s);o.insertNode(r),o.selectNodeContents(r),o.collapse(!1),l.removeAllRanges(),l.addRange(o),d(),f()}function f(){if(!n.value)return;let e=[...n.value.childNodes].map(a=>(a.textContent||"").trim()).join(" ");if(!e)return;let t=document.createElement("span");t.textContent=e.trim().replace(/\s+/g," ");let r=t.innerHTML.split(" ").map(a=>({word:a,trope:v(a)})).map(({word:a,trope:h},i,g)=>h=="Munach"&&g[i+1].trope?{word:a,trope:`Munach${g[i+1].trope}`}:{word:a,trope:h}).map(({word:a,trope:h})=>{let i=document.createElement("span");return i.textContent=a,i.classList.add(h),i}),m=[r[0]];for(let a of r.slice(1))m.push(" ",a);n.value.replaceChildren(...m)}function d(){!n.value||n.value.classList.toggle("empty",!!n.value.textContent)}return D(()=>{d(),document.documentElement.classList.add("theme-light"),b("hasVisitedTropeHighlighter")!="1"&&y("Hey! If you're using dark mode, you might notice that our trope highlighter always uses light mode. This is to allow for a better printing and screenshot experience by default.").then(()=>T("hasVisitedTropeHighlighter","1"))}),H(()=>document.documentElement.classList.remove("theme-light")),(e,t)=>(L(),S(C,{"explicit-height":""},{nav:u(()=>[V(N,{onClick:f},{default:u(()=>[j]),_:1})]),default:u(()=>[B,_("div",{ref_key:"textbox",ref:n,class:"textbox empty",contenteditable:"",role:"textbox",onInput:d,onPaste:k},null,544)]),_:1}))}});var A=w(G,[["__scopeId","data-v-4b3fdba6"]]);export{A as default};
